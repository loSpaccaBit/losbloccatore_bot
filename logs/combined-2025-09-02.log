{"channelId":"-1003088008408","environment":"development","level":"info","message":"🚀 Starting LosBloccatore Bot v2.0.0 - Refactored Architecture","nodeVersion":"v20.19.3","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:14"}
{"environment":"development","level":"info","message":"📊 Initializing database connection...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:14"}
{"environment":"development","level":"info","message":"Database connection initialized successfully with Prisma","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:14"}
{"environment":"development","level":"info","message":"✅ Database connection established","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:14"}
{"environment":"development","level":"info","message":"🔧 Initializing dependency injection container...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:14"}
{"environment":"development","level":"info","message":"TelegramCoreService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:14"}
{"environment":"development","level":"info","message":"TelegramMessageService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:14"}
{"environment":"development","level":"info","message":"TelegramChatService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:14"}
{"environment":"development","level":"info","message":"TelegramInviteService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:14"}
{"environment":"development","level":"info","message":"TelegramService initialized with all domain services","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:14"}
{"environment":"development","level":"info","message":"✅ DI Container initialized with all services","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:14"}
{"environment":"development","level":"info","message":"🎮 Initializing refactored bot controller...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:14"}
{"environment":"development","level":"info","message":"BotController initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:14"}
{"environment":"development","level":"info","message":"✅ Bot controller initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:14"}
{"environment":"development","level":"info","message":"🤖 Setting up Telegram bot...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:14"}
{"environment":"development","level":"info","message":"✅ Bot event handlers configured","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:14"}
{"environment":"development","level":"info","message":"📡 Starting bot polling...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:14"}
{"allowedUpdates":["message","edited_message","channel_post","edited_channel_post","inline_query","chosen_inline_result","callback_query","shipping_query","pre_checkout_query","poll","poll_answer","my_chat_member","chat_member","chat_join_request"],"environment":"development","level":"info","message":"Starting bot polling with allowed updates","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:14","totalUpdates":14}
{"channelId":"-1003088008408","environment":"development","level":"info","message":"🚀 Starting LosBloccatore Bot v2.0.0 - Refactored Architecture","nodeVersion":"v20.19.3","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:40"}
{"environment":"development","level":"info","message":"📊 Initializing database connection...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:40"}
{"environment":"development","level":"info","message":"Database connection initialized successfully with Prisma","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:40"}
{"environment":"development","level":"info","message":"✅ Database connection established","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:40"}
{"environment":"development","level":"info","message":"🔧 Initializing dependency injection container...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:40"}
{"environment":"development","level":"info","message":"TelegramCoreService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:40"}
{"environment":"development","level":"info","message":"TelegramMessageService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:40"}
{"environment":"development","level":"info","message":"TelegramChatService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:40"}
{"environment":"development","level":"info","message":"TelegramInviteService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:40"}
{"environment":"development","level":"info","message":"TelegramService initialized with all domain services","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:40"}
{"environment":"development","level":"info","message":"✅ DI Container initialized with all services","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:40"}
{"environment":"development","level":"info","message":"🎮 Initializing refactored bot controller...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:40"}
{"environment":"development","level":"info","message":"BotController initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:40"}
{"environment":"development","level":"info","message":"✅ Bot controller initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:40"}
{"environment":"development","level":"info","message":"🤖 Setting up Telegram bot...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:40"}
{"environment":"development","level":"info","message":"✅ Bot event handlers configured","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:40"}
{"environment":"development","level":"info","message":"📡 Starting bot polling...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:40"}
{"allowedUpdates":["message","edited_message","channel_post","edited_channel_post","inline_query","chosen_inline_result","callback_query","shipping_query","pre_checkout_query","poll","poll_answer","my_chat_member","chat_member","chat_join_request"],"environment":"development","level":"info","message":"Starting bot polling with allowed updates","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:40","totalUpdates":14}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","updateId":37757807,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:18:29.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","updateId":37757808,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:18:36.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","userId":6783481652,"username":"Ciro_001"}
{"action":"join_request","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","userId":6783481652,"username":"Ciro"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","statusTransition":"member -> left","timestamp":"2025-09-02 22:18:41","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User is leaving the channel - triggering goodbye flow","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","userId":6783481652,"username":"Ciro_001"}
{"action":"left","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User left chat","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","userId":6783481652,"username":"Ciro"}
{"activityId":1,"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request recorded","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"User has joined before - auto-approving","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","userId":6783481652,"userName":"Ciro"}
{"activityId":2,"chatId":-1003088008408,"environment":"development","level":"info","message":"User leave recorded","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Attempting to send goodbye message","service":"losbloccatore-bot","step":"before_telegram_service_call","timestamp":"2025-09-02 22:18:41","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","level":"info","message":"TelegramMessageService: Starting goodbye message send","options":{"includeReturnMessage":true},"service":"losbloccatore-bot","step":"start","timestamp":"2025-09-02 22:18:41","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message text prepared","messageLength":223,"messagePreview":"👋 **Ci dispiace vederti andare!**\n\nCiao Ciro,\n\n\nAbbiamo notato che hai lasciato il canale.\n\nSe camb...","service":"losbloccatore-bot","step":"text_prepared","timestamp":"2025-09-02 22:18:41","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: About to send message via Telegram API","service":"losbloccatore-bot","step":"before_api_call","timestamp":"2025-09-02 22:18:41","userId":6783481652,"userName":"Ciro"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request approved successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","userId":6783481652}
{"action":"approved","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request approved","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","userId":6783481652,"username":"Ciro"}
{"activityId":3,"chatId":-1003088008408,"environment":"development","level":"info","message":"User approval recorded","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"New contest participant created","referralCode":"REFMF2ZQY1M1945","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","userId":6783481652}
{"chatId":-1003088008408,"environment":"development","expireDate":1759436321,"inviteLink":"https://t.me/+ReXM7GDJDbc2ZTRk","level":"info","message":"Channel invite link created successfully","name":"Referral: REFMF2ZQY1M1945","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41"}
{"environment":"development","expireDate":"2025-10-02T20:18:41.000Z","inviteLink":"https://t.me/+ReXM7GDJDbc2ZTRk","level":"info","message":"Referral invite link created and cached","referralCode":"REFMF2ZQY1M1945","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41"}
{"environment":"development","level":"info","message":"User has not completed TikTok task - sending TikTok welcome with buttons","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message sent successfully via API","service":"losbloccatore-bot","step":"api_success","timestamp":"2025-09-02 22:18:41","userId":6783481652,"userName":"Ciro"}
{"environment":"development","firstName":"Ciro","goodbyeSent":true,"level":"info","message":"Goodbye message attempt result","service":"losbloccatore-bot","step":"after_telegram_service_call","timestamp":"2025-09-02 22:18:41","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Goodbye message sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":204,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:18:41","updateId":37757807,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","error":{"code":"MODULE_NOT_FOUND","requireStack":["/Users/lospaccabit/Downloads/losbloccatore_bot/dist/domains/telegram/TelegramMessageService.js","/Users/lospaccabit/Downloads/losbloccatore_bot/dist/services/TelegramService.js","/Users/lospaccabit/Downloads/losbloccatore_bot/dist/services/LeaderboardSchedulerService.js","/Users/lospaccabit/Downloads/losbloccatore_bot/dist/handlers/AdminCommandHandler.js","/Users/lospaccabit/Downloads/losbloccatore_bot/dist/controllers/BotController.js","/Users/lospaccabit/Downloads/losbloccatore_bot/dist/index.js"]},"level":"warn","message":"Failed to send photo, sending text message instead","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","userId":6783481652,"userName":"Ciro"}
{"environment":"development","error":{"message":"Cannot find module '@utils/cache'\nRequire stack:\n- /Users/lospaccabit/Downloads/losbloccatore_bot/dist/domains/telegram/TelegramMessageService.js\n- /Users/lospaccabit/Downloads/losbloccatore_bot/dist/services/TelegramService.js\n- /Users/lospaccabit/Downloads/losbloccatore_bot/dist/services/LeaderboardSchedulerService.js\n- /Users/lospaccabit/Downloads/losbloccatore_bot/dist/handlers/AdminCommandHandler.js\n- /Users/lospaccabit/Downloads/losbloccatore_bot/dist/controllers/BotController.js\n- /Users/lospaccabit/Downloads/losbloccatore_bot/dist/index.js","name":"Error","stack":"Error: Cannot find module '@utils/cache'\nRequire stack:\n- /Users/lospaccabit/Downloads/losbloccatore_bot/dist/domains/telegram/TelegramMessageService.js\n- /Users/lospaccabit/Downloads/losbloccatore_bot/dist/services/TelegramService.js\n- /Users/lospaccabit/Downloads/losbloccatore_bot/dist/services/LeaderboardSchedulerService.js\n- /Users/lospaccabit/Downloads/losbloccatore_bot/dist/handlers/AdminCommandHandler.js\n- /Users/lospaccabit/Downloads/losbloccatore_bot/dist/controllers/BotController.js\n- /Users/lospaccabit/Downloads/losbloccatore_bot/dist/index.js\n    at Module._resolveFilename (node:internal/modules/cjs/loader:1212:15)\n    at Module._resolveFilename (/Users/lospaccabit/Downloads/losbloccatore_bot/node_modules/tsconfig-paths/lib/register.js:103:40)\n    at Module._load (node:internal/modules/cjs/loader:1043:27)\n    at Module.require (node:internal/modules/cjs/loader:1298:19)\n    at require (node:internal/modules/helpers:182:18)\n    at /Users/lospaccabit/Downloads/losbloccatore_bot/dist/domains/telegram/TelegramMessageService.js:116:80\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TelegramMessageService.sendWelcomeWithTikTok (/Users/lospaccabit/Downloads/losbloccatore_bot/dist/domains/telegram/TelegramMessageService.js:116:32)\n    at async JoinRequestHandler.sendWelcomeMessage (/Users/lospaccabit/Downloads/losbloccatore_bot/dist/handlers/JoinRequestHandler.js:119:27)\n    at async JoinRequestHandler.handleSuccessfulApproval (/Users/lospaccabit/Downloads/losbloccatore_bot/dist/handlers/JoinRequestHandler.js:85:9)"},"level":"error","message":"Failed to send welcome message with TikTok","referralLink":"https://t.me/+ReXM7GDJDbc2ZTRk","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"warn","message":"Failed to send welcome message","reason":"User might have privacy settings that block messages from bots","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","userId":6783481652,"userName":"Ciro"}
{"chatId":-1003088008408,"chatType":"channel","duration":660,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:18:41","updateId":37757808,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","updateId":37757809,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:18:41.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","statusTransition":"left -> member","timestamp":"2025-09-02 22:18:41","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User joined channel via member update","newStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:18:41","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":7,"environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:18:41","updateId":37757809,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"callbackQueryId":"1464715739121724046","chatId":6783481652,"chatType":"private","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:19:16","updateId":37757810,"updateType":"callback_query","userId":6783481652,"username":"Ciro_001"}
{"callbackData":"tiktok_points:6783481652","environment":"development","level":"info","message":"TikTok related callback query","messageId":2280,"service":"losbloccatore-bot","timestamp":"2025-09-02 22:19:16","userId":6783481652,"userName":"Ciro"}
{"currentTime":1756844356808,"environment":"development","level":"warn","message":"TikTok timing requirement not met","service":"losbloccatore-bot","timeSinceWelcome":"no_welcome_time","timestamp":"2025-09-02 22:19:16","userId":6783481652}
{"callbackQueryId":"1464715739121724046","chatId":6783481652,"chatType":"private","duration":56,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:19:16","updateId":37757810,"updateType":"callback_query","userId":6783481652,"username":"Ciro_001"}
{"callbackQueryId":"1464715741088067303","chatId":6783481652,"chatType":"private","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:19:56","updateId":37757811,"updateType":"callback_query","userId":6783481652,"username":"Ciro_001"}
{"callbackData":"tiktok_points:6783481652","environment":"development","level":"info","message":"TikTok related callback query","messageId":2280,"service":"losbloccatore-bot","timestamp":"2025-09-02 22:19:56","userId":6783481652,"userName":"Ciro"}
{"currentTime":1756844396845,"environment":"development","level":"warn","message":"TikTok timing requirement not met","service":"losbloccatore-bot","timeSinceWelcome":"no_welcome_time","timestamp":"2025-09-02 22:19:56","userId":6783481652}
{"callbackQueryId":"1464715741088067303","chatId":6783481652,"chatType":"private","duration":165,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:19:56","updateId":37757811,"updateType":"callback_query","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","level":"info","message":"🛑 Received SIGINT - Starting graceful shutdown...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:08"}
{"channelId":"-1003088008408","environment":"development","level":"info","message":"🚀 Starting LosBloccatore Bot v2.0.0 - Refactored Architecture","nodeVersion":"v20.19.3","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:33"}
{"environment":"development","level":"info","message":"📊 Initializing database connection...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:33"}
{"environment":"development","level":"info","message":"Database connection initialized successfully with Prisma","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:33"}
{"environment":"development","level":"info","message":"✅ Database connection established","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:33"}
{"environment":"development","level":"info","message":"🔧 Initializing dependency injection container...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:33"}
{"environment":"development","level":"info","message":"TelegramCoreService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:33"}
{"environment":"development","level":"info","message":"TelegramMessageService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:33"}
{"environment":"development","level":"info","message":"TelegramChatService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:33"}
{"environment":"development","level":"info","message":"TelegramInviteService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:33"}
{"environment":"development","level":"info","message":"TelegramService initialized with all domain services","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:33"}
{"environment":"development","level":"info","message":"✅ DI Container initialized with all services","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:33"}
{"environment":"development","level":"info","message":"🎮 Initializing refactored bot controller...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:33"}
{"environment":"development","level":"info","message":"BotController initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:33"}
{"environment":"development","level":"info","message":"✅ Bot controller initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:33"}
{"environment":"development","level":"info","message":"🤖 Setting up Telegram bot...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:33"}
{"environment":"development","level":"info","message":"✅ Bot event handlers configured","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:33"}
{"environment":"development","level":"info","message":"📡 Starting bot polling...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:33"}
{"allowedUpdates":["message","edited_message","channel_post","edited_channel_post","inline_query","chosen_inline_result","callback_query","shipping_query","pre_checkout_query","poll","poll_answer","my_chat_member","chat_member","chat_join_request"],"environment":"development","level":"info","message":"Starting bot polling with allowed updates","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:33","totalUpdates":14}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:34","updateId":37757812,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:21:14.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:34","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:34","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","statusTransition":"member -> left","timestamp":"2025-09-02 22:21:34","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User is leaving the channel - triggering goodbye flow","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:34","userId":6783481652,"username":"Ciro_001"}
{"action":"left","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User left chat","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:34","userId":6783481652,"username":"Ciro"}
{"activityId":4,"chatId":-1003088008408,"environment":"development","level":"info","message":"User leave recorded","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:34","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Attempting to send goodbye message","service":"losbloccatore-bot","step":"before_telegram_service_call","timestamp":"2025-09-02 22:21:34","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","level":"info","message":"TelegramMessageService: Starting goodbye message send","options":{"includeReturnMessage":true},"service":"losbloccatore-bot","step":"start","timestamp":"2025-09-02 22:21:34","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message text prepared","messageLength":223,"messagePreview":"👋 **Ci dispiace vederti andare!**\n\nCiao Ciro,\n\n\nAbbiamo notato che hai lasciato il canale.\n\nSe camb...","service":"losbloccatore-bot","step":"text_prepared","timestamp":"2025-09-02 22:21:34","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: About to send message via Telegram API","service":"losbloccatore-bot","step":"before_api_call","timestamp":"2025-09-02 22:21:34","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message sent successfully via API","service":"losbloccatore-bot","step":"api_success","timestamp":"2025-09-02 22:21:34","userId":6783481652,"userName":"Ciro"}
{"environment":"development","firstName":"Ciro","goodbyeSent":true,"level":"info","message":"Goodbye message attempt result","service":"losbloccatore-bot","step":"after_telegram_service_call","timestamp":"2025-09-02 22:21:34","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Goodbye message sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:34","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":132,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:21:34","updateId":37757812,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:46","updateId":37757813,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:21:46.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:46","userId":6783481652,"username":"Ciro_001"}
{"action":"join_request","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:46","userId":6783481652,"username":"Ciro"}
{"activityId":5,"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request recorded","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:46","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"User has joined before - auto-approving","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:46","userId":6783481652,"userName":"Ciro"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request approved successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:46","userId":6783481652}
{"action":"approved","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request approved","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:46","userId":6783481652,"username":"Ciro"}
{"activityId":6,"chatId":-1003088008408,"environment":"development","level":"info","message":"User approval recorded","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:46","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"New contest participant created","referralCode":"REFMF2ZUXAS1945","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:46","userId":6783481652}
{"chatId":-1003088008408,"environment":"development","expireDate":1759436506,"inviteLink":"https://t.me/+_OGRD6c2Ih4yY2Rk","level":"info","message":"Channel invite link created successfully","name":"Referral: REFMF2ZUXAS1945","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:46"}
{"environment":"development","expireDate":"2025-10-02T20:21:46.000Z","inviteLink":"https://t.me/+_OGRD6c2Ih4yY2Rk","level":"info","message":"Referral invite link created and cached","referralCode":"REFMF2ZUXAS1945","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:46"}
{"environment":"development","level":"info","message":"User has not completed TikTok task - sending TikTok welcome with buttons","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:46","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"Welcome message with photo sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:47","userId":6783481652,"userName":"Ciro","welcomeTimestamp":1756844507315}
{"chatId":-1003088008408,"chatType":"channel","duration":524,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:21:47","updateId":37757813,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:47","updateId":37757814,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:21:46.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:47","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:47","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","statusTransition":"left -> member","timestamp":"2025-09-02 22:21:47","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User joined channel via member update","newStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:47","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":9,"environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:21:47","updateId":37757814,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"callbackQueryId":"1464715739169628070","chatId":6783481652,"chatType":"private","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:51","updateId":37757815,"updateType":"callback_query","userId":6783481652,"username":"Ciro_001"}
{"callbackData":"tiktok_points:6783481652","environment":"development","level":"info","message":"TikTok related callback query","messageId":2283,"service":"losbloccatore-bot","timestamp":"2025-09-02 22:21:51","userId":6783481652,"userName":"Ciro"}
{"currentTime":1756844511253,"environment":"development","level":"warn","message":"TikTok timing requirement not met","service":"losbloccatore-bot","timeSinceWelcome":3938,"timestamp":"2025-09-02 22:21:51","userId":6783481652,"welcomeTime":1756844507315}
{"callbackQueryId":"1464715739169628070","chatId":6783481652,"chatType":"private","duration":88,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:21:51","updateId":37757815,"updateType":"callback_query","userId":6783481652,"username":"Ciro_001"}
{"callbackQueryId":"1464715741621959324","chatId":6783481652,"chatType":"private","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:22:34","updateId":37757816,"updateType":"callback_query","userId":6783481652,"username":"Ciro_001"}
{"callbackData":"tiktok_points:6783481652","environment":"development","level":"info","message":"TikTok related callback query","messageId":2283,"service":"losbloccatore-bot","timestamp":"2025-09-02 22:22:34","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TikTok timing requirement met","service":"losbloccatore-bot","timeSinceWelcome":46784,"timestamp":"2025-09-02 22:22:34","userId":6783481652}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"TikTok task completed via button click","method":"button_click","pointsAwarded":3,"service":"losbloccatore-bot","timestamp":"2025-09-02 22:22:34","userId":6783481652}
{"environment":"development","level":"info","message":"TikTok task completed successfully, preparing success message","service":"losbloccatore-bot","timestamp":"2025-09-02 22:22:34","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"Sending TikTok success message using centralized template","referralLink":"https://t.me/+_OGRD6c2Ih4yY2Rk","service":"losbloccatore-bot","timestamp":"2025-09-02 22:22:34","totalPoints":3,"userId":6783481652,"userName":"Ciro"}
{"environment":"development","error":"400: Bad Request: can't parse entities: Can't find end of the entity starting at byte offset 213","level":"warn","message":"Markdown parsing failed in TikTok success message, sending without formatting","service":"losbloccatore-bot","timestamp":"2025-09-02 22:22:34","userId":6783481652}
{"environment":"development","level":"info","message":"TikTok points message sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:22:34","totalPoints":3,"userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TikTok success message sent successfully via centralized service","service":"losbloccatore-bot","timestamp":"2025-09-02 22:22:34","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TikTok task completed via button click","pointsAwarded":3,"service":"losbloccatore-bot","tiktokTaskCompleted":true,"timestamp":"2025-09-02 22:22:34","totalPoints":3,"userId":6783481652,"userName":"Ciro"}
{"callbackQueryId":"1464715741621959324","chatId":6783481652,"chatType":"private","duration":438,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:22:34","updateId":37757816,"updateType":"callback_query","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:23:06","updateId":37757817,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:23:06.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:23:06","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:23:06","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","statusTransition":"member -> left","timestamp":"2025-09-02 22:23:06","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User is leaving the channel - triggering goodbye flow","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:23:06","userId":6783481652,"username":"Ciro_001"}
{"action":"left","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User left chat","service":"losbloccatore-bot","timestamp":"2025-09-02 22:23:06","userId":6783481652,"username":"Ciro"}
{"activityId":7,"chatId":-1003088008408,"environment":"development","level":"info","message":"User leave recorded","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:23:06","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Attempting to send goodbye message","service":"losbloccatore-bot","step":"before_telegram_service_call","timestamp":"2025-09-02 22:23:06","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","level":"info","message":"TelegramMessageService: Starting goodbye message send","options":{"includeReturnMessage":true},"service":"losbloccatore-bot","step":"start","timestamp":"2025-09-02 22:23:06","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message text prepared","messageLength":223,"messagePreview":"👋 **Ci dispiace vederti andare!**\n\nCiao Ciro,\n\n\nAbbiamo notato che hai lasciato il canale.\n\nSe camb...","service":"losbloccatore-bot","step":"text_prepared","timestamp":"2025-09-02 22:23:06","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: About to send message via Telegram API","service":"losbloccatore-bot","step":"before_api_call","timestamp":"2025-09-02 22:23:06","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message sent successfully via API","service":"losbloccatore-bot","step":"api_success","timestamp":"2025-09-02 22:23:06","userId":6783481652,"userName":"Ciro"}
{"environment":"development","firstName":"Ciro","goodbyeSent":true,"level":"info","message":"Goodbye message attempt result","service":"losbloccatore-bot","step":"after_telegram_service_call","timestamp":"2025-09-02 22:23:06","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Goodbye message sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:23:06","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":104,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:23:06","updateId":37757817,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"channelId":"-1003088008408","environment":"development","level":"info","message":"🚀 Starting LosBloccatore Bot v2.0.0 - Refactored Architecture","nodeVersion":"v20.19.3","service":"losbloccatore-bot","timestamp":"2025-09-02 22:25:59"}
{"environment":"development","level":"info","message":"📊 Initializing database connection...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:25:59"}
{"environment":"development","level":"info","message":"Database connection initialized successfully with Prisma","service":"losbloccatore-bot","timestamp":"2025-09-02 22:25:59"}
{"environment":"development","level":"info","message":"✅ Database connection established","service":"losbloccatore-bot","timestamp":"2025-09-02 22:25:59"}
{"environment":"development","level":"info","message":"🔧 Initializing dependency injection container...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:25:59"}
{"environment":"development","level":"info","message":"TelegramCoreService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:25:59"}
{"environment":"development","level":"info","message":"TelegramMessageService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:25:59"}
{"environment":"development","level":"info","message":"TelegramChatService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:25:59"}
{"environment":"development","level":"info","message":"TelegramInviteService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:25:59"}
{"environment":"development","level":"info","message":"TelegramService initialized with all domain services","service":"losbloccatore-bot","timestamp":"2025-09-02 22:25:59"}
{"environment":"development","level":"info","message":"✅ DI Container initialized with all services","service":"losbloccatore-bot","timestamp":"2025-09-02 22:25:59"}
{"environment":"development","level":"info","message":"🎮 Initializing refactored bot controller...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:25:59"}
{"environment":"development","level":"info","message":"BotController initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 22:25:59"}
{"environment":"development","level":"info","message":"✅ Bot controller initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 22:25:59"}
{"environment":"development","level":"info","message":"🤖 Setting up Telegram bot...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:25:59"}
{"environment":"development","level":"info","message":"✅ Bot event handlers configured","service":"losbloccatore-bot","timestamp":"2025-09-02 22:25:59"}
{"environment":"development","level":"info","message":"📡 Starting bot polling...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:25:59"}
{"allowedUpdates":["message","edited_message","channel_post","edited_channel_post","inline_query","chosen_inline_result","callback_query","shipping_query","pre_checkout_query","poll","poll_answer","my_chat_member","chat_member","chat_join_request"],"environment":"development","level":"info","message":"Starting bot polling with allowed updates","service":"losbloccatore-bot","timestamp":"2025-09-02 22:25:59","totalUpdates":14}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:02","updateId":37757818,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:26:02.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:02","userId":6783481652,"username":"Ciro_001"}
{"action":"join_request","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:02","userId":6783481652,"username":"Ciro"}
{"activityId":8,"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request recorded","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:02","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"User has joined before - auto-approving","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:02","userId":6783481652,"userName":"Ciro"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request approved successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:02","userId":6783481652}
{"action":"approved","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request approved","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:02","userId":6783481652,"username":"Ciro"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Reactivated existing contest participant","participantId":2,"service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:02","userId":6783481652}
{"chatId":-1003088008408,"environment":"development","expireDate":1759436762,"inviteLink":"https://t.me/+4dCf1ixzf10yZGFk","level":"info","message":"Channel invite link created successfully","name":"Referral: REFMF2ZUXAS1945","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:02"}
{"environment":"development","expireDate":"2025-10-02T20:26:02.000Z","inviteLink":"https://t.me/+4dCf1ixzf10yZGFk","level":"info","message":"Referral invite link created and cached","referralCode":"REFMF2ZUXAS1945","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:02"}
{"environment":"development","level":"info","message":"User has already completed TikTok task - sending returning user welcome","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:02","totalPoints":3,"userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"Returning user welcome message sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:03","totalPoints":3,"userId":6783481652,"userName":"Ciro"}
{"chatId":-1003088008408,"chatType":"channel","duration":263,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:26:03","updateId":37757818,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:03","updateId":37757819,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:26:02.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:03","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:03","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","statusTransition":"left -> member","timestamp":"2025-09-02 22:26:03","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User joined channel via member update","newStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:03","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":8,"environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:26:03","updateId":37757819,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:13","updateId":37757820,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:26:13.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:13","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:13","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","statusTransition":"member -> left","timestamp":"2025-09-02 22:26:13","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User is leaving the channel - triggering goodbye flow","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:13","userId":6783481652,"username":"Ciro_001"}
{"action":"left","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User left chat","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:13","userId":6783481652,"username":"Ciro"}
{"activityId":9,"chatId":-1003088008408,"environment":"development","level":"info","message":"User leave recorded","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:13","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Attempting to send goodbye message","service":"losbloccatore-bot","step":"before_telegram_service_call","timestamp":"2025-09-02 22:26:13","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","level":"info","message":"TelegramMessageService: Starting goodbye message send","options":{"includeReturnMessage":true},"service":"losbloccatore-bot","step":"start","timestamp":"2025-09-02 22:26:13","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message text prepared","messageLength":223,"messagePreview":"👋 **Ci dispiace vederti andare!**\n\nCiao Ciro,\n\n\nAbbiamo notato che hai lasciato il canale.\n\nSe camb...","service":"losbloccatore-bot","step":"text_prepared","timestamp":"2025-09-02 22:26:13","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: About to send message via Telegram API","service":"losbloccatore-bot","step":"before_api_call","timestamp":"2025-09-02 22:26:13","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message sent successfully via API","service":"losbloccatore-bot","step":"api_success","timestamp":"2025-09-02 22:26:13","userId":6783481652,"userName":"Ciro"}
{"environment":"development","firstName":"Ciro","goodbyeSent":true,"level":"info","message":"Goodbye message attempt result","service":"losbloccatore-bot","step":"after_telegram_service_call","timestamp":"2025-09-02 22:26:13","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Goodbye message sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:13","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":133,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:26:13","updateId":37757820,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:21","updateId":37757821,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:26:21.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:21","userId":6783481652,"username":"Ciro_001"}
{"action":"join_request","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:21","userId":6783481652,"username":"Ciro"}
{"environment":"development","inviteLinkName":"Referral: REFMF2ZUXAS1945","level":"info","message":"Join request via referral invite link detected","referralCode":"REFMF2ZUXAS1945","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:21","userId":6783481652,"userName":"Ciro"}
{"activityId":10,"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request recorded","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:21","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"User has joined before - auto-approving","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:21","userId":6783481652,"userName":"Ciro"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request approved successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:21","userId":6783481652}
{"action":"approved","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request approved","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:21","userId":6783481652,"username":"Ciro"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Reactivated existing contest participant","participantId":2,"service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:21","userId":6783481652}
{"environment":"development","level":"info","message":"User has already completed TikTok task - sending returning user welcome","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:21","totalPoints":3,"userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"Returning user welcome message sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:22","totalPoints":3,"userId":6783481652,"userName":"Ciro"}
{"chatId":-1003088008408,"chatType":"channel","duration":443,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:26:22","updateId":37757821,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:22","updateId":37757822,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:26:21.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:22","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:22","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","statusTransition":"left -> member","timestamp":"2025-09-02 22:26:22","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User joined channel via member update","newStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:22","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":6,"environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:26:22","updateId":37757822,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Kekko","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:56","updateId":37757823,"updateType":"chat_member","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:26:56.000Z","environment":"development","firstName":"Kekko","level":"info","message":"Chat member status changed","newStatus":"left","oldStatus":"creator","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:56","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Kekko","level":"info","message":"🔍 chat_member event received","newStatus":"left","oldStatus":"creator","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:56","updateType":"chat_member","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"environment":"development","firstName":"Kekko","level":"info","message":"Processing member status change","newStatus":"left","oldStatus":"creator","service":"losbloccatore-bot","statusTransition":"creator -> left","timestamp":"2025-09-02 22:26:56","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"environment":"development","firstName":"Kekko","level":"info","message":"User is leaving the channel - triggering goodbye flow","newStatus":"left","oldStatus":"creator","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:56","userId":970970260,"username":"kekko_nocerino06"}
{"action":"left","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User left chat","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:56","userId":970970260,"username":"Kekko"}
{"activityId":11,"chatId":-1003088008408,"environment":"development","level":"info","message":"User leave recorded","newStatus":"left","oldStatus":"creator","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:56","userId":970970260,"username":"kekko_nocerino06"}
{"environment":"development","firstName":"Kekko","level":"info","message":"Attempting to send goodbye message","service":"losbloccatore-bot","step":"before_telegram_service_call","timestamp":"2025-09-02 22:26:56","userId":970970260,"username":"kekko_nocerino06"}
{"environment":"development","level":"info","message":"TelegramMessageService: Starting goodbye message send","options":{"includeReturnMessage":true},"service":"losbloccatore-bot","step":"start","timestamp":"2025-09-02 22:26:56","userId":970970260,"userName":"Kekko"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message text prepared","messageLength":224,"messagePreview":"👋 **Ci dispiace vederti andare!**\n\nCiao Kekko,\n\n\nAbbiamo notato che hai lasciato il canale.\n\nSe cam...","service":"losbloccatore-bot","step":"text_prepared","timestamp":"2025-09-02 22:26:56","userId":970970260,"userName":"Kekko"}
{"environment":"development","level":"info","message":"TelegramMessageService: About to send message via Telegram API","service":"losbloccatore-bot","step":"before_api_call","timestamp":"2025-09-02 22:26:56","userId":970970260,"userName":"Kekko"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message sent successfully via API","service":"losbloccatore-bot","step":"api_success","timestamp":"2025-09-02 22:26:57","userId":970970260,"userName":"Kekko"}
{"environment":"development","firstName":"Kekko","goodbyeSent":true,"level":"info","message":"Goodbye message attempt result","service":"losbloccatore-bot","step":"after_telegram_service_call","timestamp":"2025-09-02 22:26:57","userId":970970260,"username":"kekko_nocerino06"}
{"environment":"development","firstName":"Kekko","level":"info","message":"Goodbye message sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:57","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"chatType":"channel","duration":90,"environment":"development","firstName":"Kekko","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:26:57","updateId":37757823,"updateType":"chat_member","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Kekko","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:59","updateId":37757824,"updateType":"chat_member","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","level":"info","message":"Admin status change detected","newStatus":"creator","oldStatus":"left","service":"losbloccatore-bot","targetUserId":970970260,"targetUsername":"kekko_nocerino06","timestamp":"2025-09-02 22:26:59","updateId":37757824,"userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:26:59.000Z","environment":"development","firstName":"Kekko","level":"info","message":"Chat member status changed","newStatus":"creator","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:59","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Kekko","level":"info","message":"🔍 chat_member event received","newStatus":"creator","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:59","updateType":"chat_member","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"environment":"development","firstName":"Kekko","level":"info","message":"Processing member status change","newStatus":"creator","oldStatus":"left","service":"losbloccatore-bot","statusTransition":"left -> creator","timestamp":"2025-09-02 22:26:59","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"environment":"development","firstName":"Kekko","level":"info","message":"User joined channel via member update","newStatus":"creator","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:59","userId":970970260,"username":"kekko_nocerino06"}
{"activityId":12,"chatId":-1003088008408,"environment":"development","level":"info","message":"User approval recorded","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:59","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"New contest participant created","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:26:59","userId":970970260}
{"chatId":-1003088008408,"chatType":"channel","duration":21,"environment":"development","firstName":"Kekko","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:26:59","updateId":37757824,"updateType":"chat_member","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":970970260,"chatType":"private","environment":"development","firstName":"Kekko","level":"info","message":"Incoming Telegram update","messageId":2290,"service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:14","updateId":37757825,"updateType":"message","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"environment":"development","expireDate":1759436834,"inviteLink":"https://t.me/+GXfY7UwW7RBlMGNk","level":"info","message":"Channel invite link created successfully","name":"Referral: REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:14"}
{"environment":"development","expireDate":"2025-10-02T20:27:14.000Z","inviteLink":"https://t.me/+GXfY7UwW7RBlMGNk","level":"info","message":"Referral invite link created and cached","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:14"}
{"environment":"development","level":"info","message":"Markdown message sent successfully for referral_link","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:14"}
{"environment":"development","level":"info","message":"Link command processed successfully","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:14","totalPoints":0,"userId":970970260,"userName":"Kekko"}
{"chatId":970970260,"chatType":"private","duration":157,"environment":"development","firstName":"Kekko","level":"info","message":"Request processed successfully","messageId":2290,"service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:27:14","updateId":37757825,"updateType":"message","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:30","updateId":37757826,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:27:30.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:30","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:30","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","statusTransition":"member -> left","timestamp":"2025-09-02 22:27:30","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User is leaving the channel - triggering goodbye flow","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:30","userId":6783481652,"username":"Ciro_001"}
{"action":"left","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User left chat","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:30","userId":6783481652,"username":"Ciro"}
{"activityId":13,"chatId":-1003088008408,"environment":"development","level":"info","message":"User leave recorded","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:30","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Attempting to send goodbye message","service":"losbloccatore-bot","step":"before_telegram_service_call","timestamp":"2025-09-02 22:27:30","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","level":"info","message":"TelegramMessageService: Starting goodbye message send","options":{"includeReturnMessage":true},"service":"losbloccatore-bot","step":"start","timestamp":"2025-09-02 22:27:30","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message text prepared","messageLength":223,"messagePreview":"👋 **Ci dispiace vederti andare!**\n\nCiao Ciro,\n\n\nAbbiamo notato che hai lasciato il canale.\n\nSe camb...","service":"losbloccatore-bot","step":"text_prepared","timestamp":"2025-09-02 22:27:30","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: About to send message via Telegram API","service":"losbloccatore-bot","step":"before_api_call","timestamp":"2025-09-02 22:27:30","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message sent successfully via API","service":"losbloccatore-bot","step":"api_success","timestamp":"2025-09-02 22:27:30","userId":6783481652,"userName":"Ciro"}
{"environment":"development","firstName":"Ciro","goodbyeSent":true,"level":"info","message":"Goodbye message attempt result","service":"losbloccatore-bot","step":"after_telegram_service_call","timestamp":"2025-09-02 22:27:30","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Goodbye message sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:30","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":95,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:27:30","updateId":37757826,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53","updateId":37757827,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:27:53.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53","userId":6783481652,"username":"Ciro_001"}
{"action":"join_request","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53","userId":6783481652,"username":"Ciro"}
{"environment":"development","inviteLinkName":"Referral: REFMF301MO939DF","level":"info","message":"Join request via referral invite link detected","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53","userId":6783481652,"userName":"Ciro"}
{"activityId":14,"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request recorded","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"User has joined before - auto-approving","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53","userId":6783481652,"userName":"Ciro"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request approved successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53","userId":6783481652}
{"action":"approved","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request approved","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53","userId":6783481652,"username":"Ciro"}
{"activityId":15,"chatId":-1003088008408,"environment":"development","level":"info","message":"User approval recorded","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Processing referral code","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53","userId":6783481652}
{"environment":"development","found":true,"level":"info","message":"Referrer search by referralCode result","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Creating referral relationship","referredUserId":6783481652,"referrerId":"970970260","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53"}
{"environment":"development","level":"info","message":"Referrer points updated","pointsAwarded":2,"referrerId":"970970260","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53","updatedCount":1}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"New contest participant created","referralCode":"REFMF302SCN1945","referredBy":"970970260","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53","userId":6783481652}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","error":{"message":"Do not know how to serialize a BigInt","name":"TypeError","stack":"TypeError: Do not know how to serialize a BigInt\n    at JSON.stringify (<anonymous>)\n    at Printf.template (/Users/lospaccabit/Downloads/losbloccatore_bot/dist/utils/logger.js:26:69)\n    at Printf.transform (/Users/lospaccabit/Downloads/losbloccatore_bot/node_modules/logform/printf.js:11:26)\n    at Format.transform (/Users/lospaccabit/Downloads/losbloccatore_bot/node_modules/logform/combine.js:20:24)\n    at Console._write (/Users/lospaccabit/Downloads/losbloccatore_bot/node_modules/winston-transport/modern.js:91:33)\n    at doWrite (/Users/lospaccabit/Downloads/losbloccatore_bot/node_modules/readable-stream/lib/_stream_writable.js:390:139)\n    at writeOrBuffer (/Users/lospaccabit/Downloads/losbloccatore_bot/node_modules/readable-stream/lib/_stream_writable.js:381:5)\n    at Writable.write (/Users/lospaccabit/Downloads/losbloccatore_bot/node_modules/readable-stream/lib/_stream_writable.js:302:11)\n    at DerivedLogger.ondata (/Users/lospaccabit/Downloads/losbloccatore_bot/node_modules/readable-stream/lib/_stream_readable.js:629:20)\n    at DerivedLogger.emit (node:events:536:35)"},"level":"error","message":"Error processing chat join request","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53","userId":6783481652,"userName":"Ciro"}
{"activityId":16,"chatId":-1003088008408,"environment":"development","level":"info","message":"User rejection recorded","reason":"Processing error: Do not know how to serialize a BigInt","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":119,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:27:53","updateId":37757827,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53","updateId":37757828,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:27:53.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","statusTransition":"left -> member","timestamp":"2025-09-02 22:27:53","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User joined channel via member update","newStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:27:53","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":9,"environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:27:53","updateId":37757828,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:29:22","updateId":37757829,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:29:22.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:29:22","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:29:22","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","statusTransition":"member -> left","timestamp":"2025-09-02 22:29:22","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User is leaving the channel - triggering goodbye flow","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:29:22","userId":6783481652,"username":"Ciro_001"}
{"action":"left","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User left chat","service":"losbloccatore-bot","timestamp":"2025-09-02 22:29:22","userId":6783481652,"username":"Ciro"}
{"activityId":17,"chatId":-1003088008408,"environment":"development","level":"info","message":"User leave recorded","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:29:22","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","level":"info","message":"Referral points revoked","pointsRevoked":2,"referredUserId":6783481652,"referrerId":970970260,"service":"losbloccatore-bot","timestamp":"2025-09-02 22:29:22"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Attempting to send goodbye message","service":"losbloccatore-bot","step":"before_telegram_service_call","timestamp":"2025-09-02 22:29:22","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","level":"info","message":"TelegramMessageService: Starting goodbye message send","options":{"includeReturnMessage":true},"service":"losbloccatore-bot","step":"start","timestamp":"2025-09-02 22:29:22","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message text prepared","messageLength":223,"messagePreview":"👋 **Ci dispiace vederti andare!**\n\nCiao Ciro,\n\n\nAbbiamo notato che hai lasciato il canale.\n\nSe camb...","service":"losbloccatore-bot","step":"text_prepared","timestamp":"2025-09-02 22:29:22","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: About to send message via Telegram API","service":"losbloccatore-bot","step":"before_api_call","timestamp":"2025-09-02 22:29:22","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message sent successfully via API","service":"losbloccatore-bot","step":"api_success","timestamp":"2025-09-02 22:29:22","userId":6783481652,"userName":"Ciro"}
{"environment":"development","firstName":"Ciro","goodbyeSent":true,"level":"info","message":"Goodbye message attempt result","service":"losbloccatore-bot","step":"after_telegram_service_call","timestamp":"2025-09-02 22:29:22","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Goodbye message sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:29:22","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":114,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:29:22","updateId":37757829,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:32:27","updateId":37757830,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:32:27.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:32:27","userId":6783481652,"username":"Ciro_001"}
{"action":"join_request","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:32:27","userId":6783481652,"username":"Ciro"}
{"environment":"development","inviteLinkName":"Referral: REFMF301MO939DF","level":"info","message":"Join request via referral invite link detected","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:32:27","userId":6783481652,"userName":"Ciro"}
{"activityId":18,"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request recorded","service":"losbloccatore-bot","timestamp":"2025-09-02 22:32:27","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"User has joined before - auto-approving","service":"losbloccatore-bot","timestamp":"2025-09-02 22:32:27","userId":6783481652,"userName":"Ciro"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request approved successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:32:28","userId":6783481652}
{"action":"approved","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request approved","service":"losbloccatore-bot","timestamp":"2025-09-02 22:32:28","userId":6783481652,"username":"Ciro"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Processing referral code","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:32:28","userId":6783481652}
{"environment":"development","found":true,"level":"info","message":"Referrer search by referralCode result","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:32:28"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Creating referral relationship","referredUserId":6783481652,"referrerId":"970970260","service":"losbloccatore-bot","timestamp":"2025-09-02 22:32:28"}
{"environment":"development","level":"info","message":"Referrer points updated","pointsAwarded":2,"referrerId":"970970260","service":"losbloccatore-bot","timestamp":"2025-09-02 22:32:28","updatedCount":1}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"New contest participant created","referralCode":"REFMF308O0U1945","referredBy":"970970260","service":"losbloccatore-bot","timestamp":"2025-09-02 22:32:28","userId":6783481652}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","error":{"message":"Do not know how to serialize a BigInt","name":"TypeError","stack":"TypeError: Do not know how to serialize a BigInt\n    at JSON.stringify (<anonymous>)\n    at Printf.template (/Users/lospaccabit/Downloads/losbloccatore_bot/dist/utils/logger.js:26:69)\n    at Printf.transform (/Users/lospaccabit/Downloads/losbloccatore_bot/node_modules/logform/printf.js:11:26)\n    at Format.transform (/Users/lospaccabit/Downloads/losbloccatore_bot/node_modules/logform/combine.js:20:24)\n    at Console._write (/Users/lospaccabit/Downloads/losbloccatore_bot/node_modules/winston-transport/modern.js:91:33)\n    at doWrite (/Users/lospaccabit/Downloads/losbloccatore_bot/node_modules/readable-stream/lib/_stream_writable.js:390:139)\n    at writeOrBuffer (/Users/lospaccabit/Downloads/losbloccatore_bot/node_modules/readable-stream/lib/_stream_writable.js:381:5)\n    at Writable.write (/Users/lospaccabit/Downloads/losbloccatore_bot/node_modules/readable-stream/lib/_stream_writable.js:302:11)\n    at DerivedLogger.ondata (/Users/lospaccabit/Downloads/losbloccatore_bot/node_modules/readable-stream/lib/_stream_readable.js:629:20)\n    at DerivedLogger.emit (node:events:536:35)"},"level":"error","message":"Error processing chat join request","service":"losbloccatore-bot","timestamp":"2025-09-02 22:32:28","userId":6783481652,"userName":"Ciro"}
{"activityId":19,"chatId":-1003088008408,"environment":"development","level":"info","message":"User rejection recorded","reason":"Processing error: Do not know how to serialize a BigInt","service":"losbloccatore-bot","timestamp":"2025-09-02 22:32:28","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":153,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:32:28","updateId":37757830,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:32:28","updateId":37757831,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:32:28.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:32:28","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:32:28","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","statusTransition":"left -> member","timestamp":"2025-09-02 22:32:28","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User joined channel via member update","newStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:32:28","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":8,"environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:32:28","updateId":37757831,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"channelId":"-1003088008408","environment":"development","level":"info","message":"🚀 Starting LosBloccatore Bot v2.0.0 - Refactored Architecture","nodeVersion":"v20.19.3","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:16"}
{"environment":"development","level":"info","message":"📊 Initializing database connection...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:16"}
{"environment":"development","level":"info","message":"Database connection initialized successfully with Prisma","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:16"}
{"environment":"development","level":"info","message":"✅ Database connection established","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:16"}
{"environment":"development","level":"info","message":"🔧 Initializing dependency injection container...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:16"}
{"environment":"development","level":"info","message":"TelegramCoreService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:16"}
{"environment":"development","level":"info","message":"TelegramMessageService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:16"}
{"environment":"development","level":"info","message":"TelegramChatService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:16"}
{"environment":"development","level":"info","message":"TelegramInviteService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:16"}
{"environment":"development","level":"info","message":"TelegramService initialized with all domain services","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:16"}
{"environment":"development","level":"info","message":"✅ DI Container initialized with all services","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:16"}
{"environment":"development","level":"info","message":"🎮 Initializing refactored bot controller...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:16"}
{"environment":"development","level":"info","message":"BotController initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:16"}
{"environment":"development","level":"info","message":"✅ Bot controller initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:16"}
{"environment":"development","level":"info","message":"🤖 Setting up Telegram bot...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:16"}
{"environment":"development","level":"info","message":"✅ Bot event handlers configured","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:16"}
{"environment":"development","level":"info","message":"📡 Starting bot polling...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:16"}
{"allowedUpdates":["message","edited_message","channel_post","edited_channel_post","inline_query","chosen_inline_result","callback_query","shipping_query","pre_checkout_query","poll","poll_answer","my_chat_member","chat_member","chat_join_request"],"environment":"development","level":"info","message":"Starting bot polling with allowed updates","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:16","totalUpdates":14}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:17","updateId":37757832,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:32:45.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:17","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:17","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","statusTransition":"member -> left","timestamp":"2025-09-02 22:35:17","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User is leaving the channel - triggering goodbye flow","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:17","userId":6783481652,"username":"Ciro_001"}
{"action":"left","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User left chat","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:17","userId":6783481652,"username":"Ciro"}
{"activityId":20,"chatId":-1003088008408,"environment":"development","level":"info","message":"User leave recorded","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:17","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","level":"info","message":"Referral points revoked","pointsRevoked":2,"referredUserId":6783481652,"referrerId":970970260,"service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:17"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Attempting to send goodbye message","service":"losbloccatore-bot","step":"before_telegram_service_call","timestamp":"2025-09-02 22:35:17","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","level":"info","message":"TelegramMessageService: Starting goodbye message send","options":{"includeReturnMessage":true},"service":"losbloccatore-bot","step":"start","timestamp":"2025-09-02 22:35:17","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message text prepared","messageLength":223,"messagePreview":"👋 **Ci dispiace vederti andare!**\n\nCiao Ciro,\n\n\nAbbiamo notato che hai lasciato il canale.\n\nSe camb...","service":"losbloccatore-bot","step":"text_prepared","timestamp":"2025-09-02 22:35:17","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: About to send message via Telegram API","service":"losbloccatore-bot","step":"before_api_call","timestamp":"2025-09-02 22:35:17","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message sent successfully via API","service":"losbloccatore-bot","step":"api_success","timestamp":"2025-09-02 22:35:17","userId":6783481652,"userName":"Ciro"}
{"environment":"development","firstName":"Ciro","goodbyeSent":true,"level":"info","message":"Goodbye message attempt result","service":"losbloccatore-bot","step":"after_telegram_service_call","timestamp":"2025-09-02 22:35:17","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Goodbye message sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:17","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":296,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:35:17","updateId":37757832,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:25","updateId":37757833,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:35:25.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:25","userId":6783481652,"username":"Ciro_001"}
{"action":"join_request","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:25","userId":6783481652,"username":"Ciro"}
{"environment":"development","inviteLinkName":"Referral: REFMF301MO939DF","level":"info","message":"Join request via referral invite link detected","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:25","userId":6783481652,"userName":"Ciro"}
{"activityId":21,"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request recorded","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:25","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"User has joined before - auto-approving","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:25","userId":6783481652,"userName":"Ciro"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request approved successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:25","userId":6783481652}
{"action":"approved","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request approved","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:25","userId":6783481652,"username":"Ciro"}
{"activityId":22,"chatId":-1003088008408,"environment":"development","level":"info","message":"User approval recorded","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:25","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Reactivated existing contest participant","participantId":5,"service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:25","userId":6783481652}
{"chatId":-1003088008408,"environment":"development","expireDate":1759437325,"inviteLink":"https://t.me/+HzzLx87TreY5YmY0","level":"info","message":"Channel invite link created successfully","name":"Referral: REFMF308O0U1945","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:25"}
{"environment":"development","expireDate":"2025-10-02T20:35:25.000Z","inviteLink":"https://t.me/+HzzLx87TreY5YmY0","level":"info","message":"Referral invite link created and cached","referralCode":"REFMF308O0U1945","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:25"}
{"environment":"development","level":"info","message":"User has not completed TikTok task - sending TikTok welcome with buttons","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:25","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"Welcome message with photo sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:25","userId":6783481652,"userName":"Ciro","welcomeTimestamp":1756845325989}
{"chatId":-1003088008408,"chatType":"channel","duration":507,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:35:25","updateId":37757833,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:26","updateId":37757834,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:35:25.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:26","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:26","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","statusTransition":"left -> member","timestamp":"2025-09-02 22:35:26","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User joined channel via member update","newStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:35:26","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":7,"environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:35:26","updateId":37757834,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:10","updateId":37757835,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:38:10.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:10","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:10","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","statusTransition":"member -> left","timestamp":"2025-09-02 22:38:10","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User is leaving the channel - triggering goodbye flow","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:10","userId":6783481652,"username":"Ciro_001"}
{"action":"left","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User left chat","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:10","userId":6783481652,"username":"Ciro"}
{"activityId":23,"chatId":-1003088008408,"environment":"development","level":"info","message":"User leave recorded","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:10","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Attempting to send goodbye message","service":"losbloccatore-bot","step":"before_telegram_service_call","timestamp":"2025-09-02 22:38:10","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","level":"info","message":"TelegramMessageService: Starting goodbye message send","options":{"includeReturnMessage":true},"service":"losbloccatore-bot","step":"start","timestamp":"2025-09-02 22:38:10","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message text prepared","messageLength":223,"messagePreview":"👋 **Ci dispiace vederti andare!**\n\nCiao Ciro,\n\n\nAbbiamo notato che hai lasciato il canale.\n\nSe camb...","service":"losbloccatore-bot","step":"text_prepared","timestamp":"2025-09-02 22:38:10","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: About to send message via Telegram API","service":"losbloccatore-bot","step":"before_api_call","timestamp":"2025-09-02 22:38:10","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message sent successfully via API","service":"losbloccatore-bot","step":"api_success","timestamp":"2025-09-02 22:38:11","userId":6783481652,"userName":"Ciro"}
{"environment":"development","firstName":"Ciro","goodbyeSent":true,"level":"info","message":"Goodbye message attempt result","service":"losbloccatore-bot","step":"after_telegram_service_call","timestamp":"2025-09-02 22:38:11","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Goodbye message sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:11","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":81,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:38:11","updateId":37757835,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"channelId":"-1003088008408","environment":"development","level":"info","message":"🚀 Starting LosBloccatore Bot v2.0.0 - Refactored Architecture","nodeVersion":"v20.19.3","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:24"}
{"environment":"development","level":"info","message":"📊 Initializing database connection...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:24"}
{"environment":"development","level":"info","message":"Database connection initialized successfully with Prisma","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:24"}
{"environment":"development","level":"info","message":"✅ Database connection established","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:24"}
{"environment":"development","level":"info","message":"🔧 Initializing dependency injection container...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:24"}
{"environment":"development","level":"info","message":"TelegramCoreService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:24"}
{"environment":"development","level":"info","message":"TelegramMessageService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:24"}
{"environment":"development","level":"info","message":"TelegramChatService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:24"}
{"environment":"development","level":"info","message":"TelegramInviteService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:24"}
{"environment":"development","level":"info","message":"TelegramService initialized with all domain services","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:24"}
{"environment":"development","level":"info","message":"✅ DI Container initialized with all services","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:24"}
{"environment":"development","level":"info","message":"🎮 Initializing refactored bot controller...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:24"}
{"environment":"development","level":"info","message":"BotController initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:24"}
{"environment":"development","level":"info","message":"✅ Bot controller initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:24"}
{"environment":"development","level":"info","message":"🤖 Setting up Telegram bot...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:24"}
{"environment":"development","level":"info","message":"✅ Bot event handlers configured","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:24"}
{"environment":"development","level":"info","message":"📡 Starting bot polling...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:24"}
{"allowedUpdates":["message","edited_message","channel_post","edited_channel_post","inline_query","chosen_inline_result","callback_query","shipping_query","pre_checkout_query","poll","poll_answer","my_chat_member","chat_member","chat_join_request"],"environment":"development","level":"info","message":"Starting bot polling with allowed updates","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:24","totalUpdates":14}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:27","updateId":37757836,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:38:27.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:27","userId":6783481652,"username":"Ciro_001"}
{"action":"join_request","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:27","userId":6783481652,"username":"Ciro"}
{"environment":"development","inviteLinkName":"Referral: REFMF301MO939DF","level":"info","message":"Join request via referral invite link detected","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:27","userId":6783481652,"userName":"Ciro"}
{"activityId":24,"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request recorded","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:27","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"User has joined before - auto-approving","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:27","userId":6783481652,"userName":"Ciro"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request approved successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:28","userId":6783481652}
{"action":"approved","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request approved","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:28","userId":6783481652,"username":"Ciro"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Processing referral code","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:28","userId":6783481652}
{"environment":"development","found":true,"level":"info","message":"Referrer search by referralCode result","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:28"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Creating referral relationship","referredUserId":6783481652,"referrerId":"970970260","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:28"}
{"environment":"development","level":"info","message":"Referrer points updated","pointsAwarded":2,"referrerId":"970970260","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:28","updatedCount":1}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"New contest participant created","referralCode":"REFMF30GDUK1945","referredBy":"970970260","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:28","userId":6783481652}
{"chatId":-1003088008408,"environment":"development","expireDate":1759437508,"inviteLink":"https://t.me/+TDW-WVgggYsxMWU0","level":"info","message":"Channel invite link created successfully","name":"Referral: REFMF30GDUK1945","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:28"}
{"environment":"development","expireDate":"2025-10-02T20:38:28.000Z","inviteLink":"https://t.me/+TDW-WVgggYsxMWU0","level":"info","message":"Referral invite link created and cached","referralCode":"REFMF30GDUK1945","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:28"}
{"environment":"development","level":"info","message":"User has not completed TikTok task - sending TikTok welcome with buttons","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:28","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"Welcome message with photo sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:29","userId":6783481652,"userName":"Ciro","welcomeTimestamp":1756845509297}
{"chatId":-1003088008408,"chatType":"channel","duration":1347,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:38:29","updateId":37757836,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:29","updateId":37757837,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:38:28.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:29","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:29","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","statusTransition":"left -> member","timestamp":"2025-09-02 22:38:29","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User joined channel via member update","newStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:38:29","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":6,"environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:38:29","updateId":37757837,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:46:57","updateId":37757838,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:46:57.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:46:57","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:46:57","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","statusTransition":"member -> left","timestamp":"2025-09-02 22:46:57","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User is leaving the channel - triggering goodbye flow","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:46:57","userId":6783481652,"username":"Ciro_001"}
{"action":"left","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User left chat","service":"losbloccatore-bot","timestamp":"2025-09-02 22:46:57","userId":6783481652,"username":"Ciro"}
{"activityId":25,"chatId":-1003088008408,"environment":"development","level":"info","message":"User leave recorded","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:46:57","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","level":"info","message":"Referral points revoked","pointsRevoked":2,"referredUserId":6783481652,"referrerId":970970260,"service":"losbloccatore-bot","timestamp":"2025-09-02 22:46:57"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Attempting to send goodbye message","service":"losbloccatore-bot","step":"before_telegram_service_call","timestamp":"2025-09-02 22:46:57","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","level":"info","message":"TelegramMessageService: Starting goodbye message send","options":{"includeReturnMessage":true},"service":"losbloccatore-bot","step":"start","timestamp":"2025-09-02 22:46:57","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message text prepared","messageLength":223,"messagePreview":"👋 **Ci dispiace vederti andare!**\n\nCiao Ciro,\n\n\nAbbiamo notato che hai lasciato il canale.\n\nSe camb...","service":"losbloccatore-bot","step":"text_prepared","timestamp":"2025-09-02 22:46:57","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: About to send message via Telegram API","service":"losbloccatore-bot","step":"before_api_call","timestamp":"2025-09-02 22:46:57","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message sent successfully via API","service":"losbloccatore-bot","step":"api_success","timestamp":"2025-09-02 22:46:58","userId":6783481652,"userName":"Ciro"}
{"environment":"development","firstName":"Ciro","goodbyeSent":true,"level":"info","message":"Goodbye message attempt result","service":"losbloccatore-bot","step":"after_telegram_service_call","timestamp":"2025-09-02 22:46:58","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Goodbye message sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:46:58","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":169,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:46:58","updateId":37757838,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:21","updateId":37757839,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:47:21.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:21","userId":6783481652,"username":"Ciro_001"}
{"action":"join_request","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:21","userId":6783481652,"username":"Ciro"}
{"environment":"development","inviteLinkName":"Referral: REFMF301MO939DF","level":"info","message":"Join request via referral invite link detected","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:21","userId":6783481652,"userName":"Ciro"}
{"activityId":26,"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request recorded","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:21","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"User has joined before - auto-approving","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:21","userId":6783481652,"userName":"Ciro"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request approved successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:21","userId":6783481652}
{"action":"approved","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request approved","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:21","userId":6783481652,"username":"Ciro"}
{"activityId":27,"chatId":-1003088008408,"environment":"development","level":"info","message":"User approval recorded","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:21","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Reactivated existing contest participant","participantId":6,"service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:21","userId":6783481652}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Processing referral for returning user","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:21","userId":6783481652}
{"environment":"development","level":"info","message":"User has not completed TikTok task - sending TikTok welcome with buttons","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:21","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"Welcome message with photo sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:22","userId":6783481652,"userName":"Ciro","welcomeTimestamp":1756846042684}
{"chatId":-1003088008408,"chatType":"channel","duration":1230,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:47:22","updateId":37757839,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:22","updateId":37757840,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:47:21.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:22","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:22","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","statusTransition":"left -> member","timestamp":"2025-09-02 22:47:22","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User joined channel via member update","newStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:22","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":10,"environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:47:22","updateId":37757840,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:38","updateId":37757841,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:47:38.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:38","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:38","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","statusTransition":"member -> left","timestamp":"2025-09-02 22:47:38","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User is leaving the channel - triggering goodbye flow","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:38","userId":6783481652,"username":"Ciro_001"}
{"action":"left","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User left chat","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:38","userId":6783481652,"username":"Ciro"}
{"activityId":28,"chatId":-1003088008408,"environment":"development","level":"info","message":"User leave recorded","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:38","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Attempting to send goodbye message","service":"losbloccatore-bot","step":"before_telegram_service_call","timestamp":"2025-09-02 22:47:38","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","level":"info","message":"TelegramMessageService: Starting goodbye message send","options":{"includeReturnMessage":true},"service":"losbloccatore-bot","step":"start","timestamp":"2025-09-02 22:47:38","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message text prepared","messageLength":223,"messagePreview":"👋 **Ci dispiace vederti andare!**\n\nCiao Ciro,\n\n\nAbbiamo notato che hai lasciato il canale.\n\nSe camb...","service":"losbloccatore-bot","step":"text_prepared","timestamp":"2025-09-02 22:47:38","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: About to send message via Telegram API","service":"losbloccatore-bot","step":"before_api_call","timestamp":"2025-09-02 22:47:38","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message sent successfully via API","service":"losbloccatore-bot","step":"api_success","timestamp":"2025-09-02 22:47:39","userId":6783481652,"userName":"Ciro"}
{"environment":"development","firstName":"Ciro","goodbyeSent":true,"level":"info","message":"Goodbye message attempt result","service":"losbloccatore-bot","step":"after_telegram_service_call","timestamp":"2025-09-02 22:47:39","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Goodbye message sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:39","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":105,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:47:39","updateId":37757841,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:49","updateId":37757842,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:47:48.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:49","userId":6783481652,"username":"Ciro_001"}
{"action":"join_request","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:49","userId":6783481652,"username":"Ciro"}
{"environment":"development","inviteLinkName":"Referral: REFMF301MO939DF","level":"info","message":"Join request via referral invite link detected","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:49","userId":6783481652,"userName":"Ciro"}
{"activityId":29,"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request recorded","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:49","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"User has joined before - auto-approving","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:49","userId":6783481652,"userName":"Ciro"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request approved successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:49","userId":6783481652}
{"action":"approved","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request approved","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:49","userId":6783481652,"username":"Ciro"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Reactivated existing contest participant","participantId":6,"service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:49","userId":6783481652}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Processing referral for returning user","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:49","userId":6783481652}
{"environment":"development","level":"info","message":"User has not completed TikTok task - sending TikTok welcome with buttons","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:49","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"Welcome message with photo sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:49","userId":6783481652,"userName":"Ciro","welcomeTimestamp":1756846069487}
{"chatId":-1003088008408,"chatType":"channel","duration":488,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:47:49","updateId":37757842,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:49","updateId":37757843,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:47:49.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:49","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:49","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","statusTransition":"left -> member","timestamp":"2025-09-02 22:47:49","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User joined channel via member update","newStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:47:49","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":12,"environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:47:49","updateId":37757843,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:10","updateId":37757844,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:51:10.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:10","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:10","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","statusTransition":"member -> left","timestamp":"2025-09-02 22:51:10","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User is leaving the channel - triggering goodbye flow","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:10","userId":6783481652,"username":"Ciro_001"}
{"action":"left","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User left chat","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:10","userId":6783481652,"username":"Ciro"}
{"activityId":30,"chatId":-1003088008408,"environment":"development","level":"info","message":"User leave recorded","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:10","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Attempting to send goodbye message","service":"losbloccatore-bot","step":"before_telegram_service_call","timestamp":"2025-09-02 22:51:10","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","level":"info","message":"TelegramMessageService: Starting goodbye message send","options":{"includeReturnMessage":true},"service":"losbloccatore-bot","step":"start","timestamp":"2025-09-02 22:51:10","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message text prepared","messageLength":223,"messagePreview":"👋 **Ci dispiace vederti andare!**\n\nCiao Ciro,\n\n\nAbbiamo notato che hai lasciato il canale.\n\nSe camb...","service":"losbloccatore-bot","step":"text_prepared","timestamp":"2025-09-02 22:51:10","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: About to send message via Telegram API","service":"losbloccatore-bot","step":"before_api_call","timestamp":"2025-09-02 22:51:10","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message sent successfully via API","service":"losbloccatore-bot","step":"api_success","timestamp":"2025-09-02 22:51:10","userId":6783481652,"userName":"Ciro"}
{"environment":"development","firstName":"Ciro","goodbyeSent":true,"level":"info","message":"Goodbye message attempt result","service":"losbloccatore-bot","step":"after_telegram_service_call","timestamp":"2025-09-02 22:51:10","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Goodbye message sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:10","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":91,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:51:10","updateId":37757844,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:22","updateId":37757845,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:51:22.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:22","userId":6783481652,"username":"Ciro_001"}
{"action":"join_request","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:22","userId":6783481652,"username":"Ciro"}
{"environment":"development","inviteLinkName":"Referral: REFMF301MO939DF","level":"info","message":"Join request via referral invite link detected","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:22","userId":6783481652,"userName":"Ciro"}
{"activityId":31,"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request recorded","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:22","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"User has joined before - auto-approving","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:22","userId":6783481652,"userName":"Ciro"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request approved successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:22","userId":6783481652}
{"action":"approved","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request approved","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:22","userId":6783481652,"username":"Ciro"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Reactivated existing contest participant","participantId":6,"service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:22","userId":6783481652}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Processing referral for returning user","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:22","userId":6783481652}
{"environment":"development","level":"info","message":"User has not completed TikTok task - sending TikTok welcome with buttons","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:22","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"Welcome message with photo sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:22","userId":6783481652,"userName":"Ciro","welcomeTimestamp":1756846282491}
{"chatId":-1003088008408,"chatType":"channel","duration":344,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:51:22","updateId":37757845,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:22","updateId":37757846,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:51:22.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:22","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:22","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","statusTransition":"left -> member","timestamp":"2025-09-02 22:51:22","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User joined channel via member update","newStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:22","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":8,"environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:51:22","updateId":37757846,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"channelId":"-1003088008408","environment":"development","level":"info","message":"🚀 Starting LosBloccatore Bot v2.0.0 - Refactored Architecture","nodeVersion":"v20.19.3","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44"}
{"environment":"development","level":"info","message":"📊 Initializing database connection...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44"}
{"environment":"development","level":"info","message":"Database connection initialized successfully with Prisma","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44"}
{"environment":"development","level":"info","message":"✅ Database connection established","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44"}
{"environment":"development","level":"info","message":"🔧 Initializing dependency injection container...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44"}
{"environment":"development","level":"info","message":"TelegramCoreService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44"}
{"environment":"development","level":"info","message":"TelegramMessageService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44"}
{"environment":"development","level":"info","message":"TelegramChatService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44"}
{"environment":"development","level":"info","message":"TelegramInviteService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44"}
{"environment":"development","level":"info","message":"TelegramService initialized with all domain services","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44"}
{"environment":"development","level":"info","message":"✅ DI Container initialized with all services","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44"}
{"environment":"development","level":"info","message":"🎮 Initializing refactored bot controller...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44"}
{"environment":"development","level":"info","message":"BotController initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44"}
{"environment":"development","level":"info","message":"✅ Bot controller initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44"}
{"environment":"development","level":"info","message":"🤖 Setting up Telegram bot...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44"}
{"environment":"development","level":"info","message":"✅ Bot event handlers configured","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44"}
{"environment":"development","level":"info","message":"📡 Starting bot polling...","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44"}
{"allowedUpdates":["message","edited_message","channel_post","edited_channel_post","inline_query","chosen_inline_result","callback_query","shipping_query","pre_checkout_query","poll","poll_answer","my_chat_member","chat_member","chat_join_request"],"environment":"development","level":"info","message":"Starting bot polling with allowed updates","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44","totalUpdates":14}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44","updateId":37757847,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:51:43.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","statusTransition":"member -> left","timestamp":"2025-09-02 22:51:44","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User is leaving the channel - triggering goodbye flow","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44","userId":6783481652,"username":"Ciro_001"}
{"action":"left","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User left chat","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44","userId":6783481652,"username":"Ciro"}
{"activityId":32,"chatId":-1003088008408,"environment":"development","level":"info","message":"User leave recorded","newStatus":"left","oldStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Attempting to send goodbye message","service":"losbloccatore-bot","step":"before_telegram_service_call","timestamp":"2025-09-02 22:51:44","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","level":"info","message":"TelegramMessageService: Starting goodbye message send","options":{"includeReturnMessage":true},"service":"losbloccatore-bot","step":"start","timestamp":"2025-09-02 22:51:44","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message text prepared","messageLength":223,"messagePreview":"👋 **Ci dispiace vederti andare!**\n\nCiao Ciro,\n\n\nAbbiamo notato che hai lasciato il canale.\n\nSe camb...","service":"losbloccatore-bot","step":"text_prepared","timestamp":"2025-09-02 22:51:44","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: About to send message via Telegram API","service":"losbloccatore-bot","step":"before_api_call","timestamp":"2025-09-02 22:51:44","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"TelegramMessageService: Goodbye message sent successfully via API","service":"losbloccatore-bot","step":"api_success","timestamp":"2025-09-02 22:51:44","userId":6783481652,"userName":"Ciro"}
{"environment":"development","firstName":"Ciro","goodbyeSent":true,"level":"info","message":"Goodbye message attempt result","service":"losbloccatore-bot","step":"after_telegram_service_call","timestamp":"2025-09-02 22:51:44","userId":6783481652,"username":"Ciro_001"}
{"environment":"development","firstName":"Ciro","level":"info","message":"Goodbye message sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:44","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":118,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:51:44","updateId":37757847,"updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"Ciro","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:49","updateId":37757848,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:51:49.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:49","userId":6783481652,"username":"Ciro_001"}
{"action":"join_request","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request received","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:49","userId":6783481652,"username":"Ciro"}
{"environment":"development","inviteLinkName":"Referral: REFMF301MO939DF","level":"info","message":"Join request via referral invite link detected","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:49","userId":6783481652,"userName":"Ciro"}
{"activityId":33,"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request recorded","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:49","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"User has joined before - auto-approving","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:49","userId":6783481652,"userName":"Ciro"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Join request approved successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:49","userId":6783481652}
{"action":"approved","chatId":-1003088008408,"chatTitle":"Test mio canale","environment":"development","level":"info","message":"User join request approved","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:49","userId":6783481652,"username":"Ciro"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Reactivated existing contest participant","participantId":6,"service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:49","userId":6783481652}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Processing referral for returning user","referralCode":"REFMF301MO939DF","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:49","userId":6783481652}
{"environment":"development","level":"info","message":"Reactivating existing referral relationship","previousStatus":"LEFT","referralId":1,"referrerId":"970970260","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:49","userId":6783481652}
{"environment":"development","level":"info","message":"Referral reactivated and points re-awarded","pointsAwarded":2,"previousStatus":"LEFT","referrerId":"970970260","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:49","updatedCount":1,"userId":6783481652}
{"chatId":-1003088008408,"environment":"development","expireDate":1759438309,"inviteLink":"https://t.me/+YnRfT4p0cCk4OTBk","level":"info","message":"Channel invite link created successfully","name":"Referral: REFMF30GDUK1945","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:50"}
{"environment":"development","expireDate":"2025-10-02T20:51:49.000Z","inviteLink":"https://t.me/+YnRfT4p0cCk4OTBk","level":"info","message":"Referral invite link created and cached","referralCode":"REFMF30GDUK1945","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:50"}
{"environment":"development","level":"info","message":"User has not completed TikTok task - sending TikTok welcome with buttons","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:50","userId":6783481652,"userName":"Ciro"}
{"environment":"development","level":"info","message":"Welcome message with photo sent successfully","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:50","userId":6783481652,"userName":"Ciro","welcomeTimestamp":1756846310443}
{"chatId":-1003088008408,"chatType":"channel","duration":615,"environment":"development","firstName":"Ciro","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:51:50","updateId":37757848,"updateType":"chat_join_request","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Incoming Telegram update","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:50","updateId":37757849,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"chatId":-1003088008408,"chatTitle":"Test mio canale","date":"2025-09-02T20:51:49.000Z","environment":"development","firstName":"Ciro","level":"info","message":"Chat member status changed","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:50","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","eventType":"chat_member","firstName":"Ciro","level":"info","message":"🔍 chat_member event received","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:50","updateType":"chat_member","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"Processing member status change","newStatus":"member","oldStatus":"left","service":"losbloccatore-bot","statusTransition":"left -> member","timestamp":"2025-09-02 22:51:50","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"environment":"development","firstName":"Ciro","level":"info","message":"User joined channel via member update","newStatus":"member","service":"losbloccatore-bot","timestamp":"2025-09-02 22:51:50","userId":6783481652,"username":"Ciro_001"}
{"chatId":-1003088008408,"chatType":"channel","duration":8,"environment":"development","firstName":"LOSBLOCCATORE","level":"info","message":"Request processed successfully","service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 22:51:50","updateId":37757849,"updateType":"chat_member","userId":7777688112,"username":"loSbloccatore_bot"}
{"channelId":"-1003088008408","environment":"development","level":"info","message":"🚀 Starting LosBloccatore Bot v2.0.0 - Refactored Architecture","nodeVersion":"v20.19.3","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:12"}
{"environment":"development","level":"info","message":"📊 Initializing database connection...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:12"}
{"environment":"development","level":"info","message":"Database connection initialized successfully with Prisma","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:12"}
{"environment":"development","level":"info","message":"✅ Database connection established","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:12"}
{"environment":"development","level":"info","message":"🔧 Initializing dependency injection container...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:12"}
{"environment":"development","level":"info","message":"TelegramCoreService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:12"}
{"environment":"development","level":"info","message":"TelegramMessageService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:12"}
{"environment":"development","level":"info","message":"TelegramChatService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:12"}
{"environment":"development","level":"info","message":"TelegramInviteService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:12"}
{"environment":"development","level":"info","message":"TelegramService initialized with all domain services","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:12"}
{"environment":"development","level":"info","message":"✅ DI Container initialized with all services","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:12"}
{"environment":"development","level":"info","message":"🎮 Initializing refactored bot controller...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:12"}
{"environment":"development","level":"info","message":"BotController initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:12"}
{"environment":"development","level":"info","message":"✅ Bot controller initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:12"}
{"environment":"development","level":"info","message":"🤖 Setting up Telegram bot...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:12"}
{"environment":"development","level":"info","message":"✅ Bot event handlers configured","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:12"}
{"environment":"development","level":"info","message":"📡 Starting bot polling...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:12"}
{"allowedUpdates":["message","edited_message","channel_post","edited_channel_post","inline_query","chosen_inline_result","callback_query","shipping_query","pre_checkout_query","poll","poll_answer","my_chat_member","chat_member","chat_join_request"],"environment":"development","level":"info","message":"Starting bot polling with allowed updates","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:12","totalUpdates":14}
{"chatId":970970260,"chatType":"private","environment":"development","firstName":"Kekko","level":"info","message":"Incoming Telegram update","messageId":2311,"service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:17","updateId":37757854,"updateType":"message","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Manual leaderboard generation requested","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:17"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Generating and sending scheduled leaderboard","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:17"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Starting leaderboard image generation","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:17"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Leaderboard image generated successfully","outputPath":"/Users/lospaccabit/Downloads/losbloccatore_bot/media/classifica_output.png","participantCount":2,"service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:17"}
{"environment":"development","level":"info","message":"TelegramCoreService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:17"}
{"environment":"development","level":"info","message":"TelegramMessageService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:17"}
{"environment":"development","level":"info","message":"TelegramChatService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:17"}
{"environment":"development","level":"info","message":"TelegramInviteService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:17"}
{"environment":"development","level":"info","message":"TelegramService initialized with all domain services","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:17"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Photo sent successfully","photoPath":"/Users/lospaccabit/Downloads/losbloccatore_bot/media/classifica_output.png","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:18"}
{"chatId":-1003088008408,"dbChatId":-1003088008408,"environment":"development","imagePath":"/Users/lospaccabit/Downloads/losbloccatore_bot/media/classifica_output.png","level":"info","message":"Scheduled leaderboard sent successfully","participantCount":2,"service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:18"}
{"adminUserId":970970260,"environment":"development","level":"info","message":"Manual leaderboard generation triggered by admin","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:18"}
{"chatId":970970260,"chatType":"private","duration":1242,"environment":"development","firstName":"Kekko","level":"info","message":"Request processed successfully","messageId":2311,"service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 23:12:18","updateId":37757854,"updateType":"message","userId":970970260,"username":"kekko_nocerino06"}
{"channelId":"-1003088008408","environment":"development","level":"info","message":"🚀 Starting LosBloccatore Bot v2.0.0 - Refactored Architecture","nodeVersion":"v20.19.3","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:49"}
{"environment":"development","level":"info","message":"📊 Initializing database connection...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:49"}
{"environment":"development","level":"info","message":"Database connection initialized successfully with Prisma","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:49"}
{"environment":"development","level":"info","message":"✅ Database connection established","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:49"}
{"environment":"development","level":"info","message":"🔧 Initializing dependency injection container...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:49"}
{"environment":"development","level":"info","message":"TelegramCoreService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:49"}
{"environment":"development","level":"info","message":"TelegramMessageService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:49"}
{"environment":"development","level":"info","message":"TelegramChatService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:49"}
{"environment":"development","level":"info","message":"TelegramInviteService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:49"}
{"environment":"development","level":"info","message":"TelegramService initialized with all domain services","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:49"}
{"environment":"development","level":"info","message":"✅ DI Container initialized with all services","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:49"}
{"environment":"development","level":"info","message":"🎮 Initializing refactored bot controller...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:49"}
{"environment":"development","level":"info","message":"BotController initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:49"}
{"environment":"development","level":"info","message":"✅ Bot controller initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:49"}
{"environment":"development","level":"info","message":"🤖 Setting up Telegram bot...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:49"}
{"environment":"development","level":"info","message":"✅ Bot event handlers configured","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:49"}
{"environment":"development","level":"info","message":"📡 Starting bot polling...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:49"}
{"allowedUpdates":["message","edited_message","channel_post","edited_channel_post","inline_query","chosen_inline_result","callback_query","shipping_query","pre_checkout_query","poll","poll_answer","my_chat_member","chat_member","chat_join_request"],"environment":"development","level":"info","message":"Starting bot polling with allowed updates","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:49","totalUpdates":14}
{"chatId":970970260,"chatType":"private","environment":"development","firstName":"Kekko","level":"info","message":"Incoming Telegram update","messageId":2314,"service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:50","updateId":37757855,"updateType":"message","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Manual leaderboard generation requested","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:50"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Generating and sending scheduled leaderboard","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:50"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Starting leaderboard image generation","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:50"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Leaderboard image generated successfully","outputPath":"/Users/lospaccabit/Downloads/losbloccatore_bot/media/classifica_output.png","participantCount":2,"service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:50"}
{"environment":"development","level":"info","message":"TelegramCoreService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:50"}
{"environment":"development","level":"info","message":"TelegramMessageService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:50"}
{"environment":"development","level":"info","message":"TelegramChatService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:50"}
{"environment":"development","level":"info","message":"TelegramInviteService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:50"}
{"environment":"development","level":"info","message":"TelegramService initialized with all domain services","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:50"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Photo sent successfully","photoPath":"/Users/lospaccabit/Downloads/losbloccatore_bot/media/classifica_output.png","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:51"}
{"chatId":-1003088008408,"dbChatId":-1003088008408,"environment":"development","imagePath":"/Users/lospaccabit/Downloads/losbloccatore_bot/media/classifica_output.png","level":"info","message":"Scheduled leaderboard sent successfully","participantCount":2,"service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:51"}
{"adminUserId":970970260,"environment":"development","level":"info","message":"Manual leaderboard generation triggered by admin","service":"losbloccatore-bot","timestamp":"2025-09-02 23:12:51"}
{"chatId":970970260,"chatType":"private","duration":1096,"environment":"development","firstName":"Kekko","level":"info","message":"Request processed successfully","messageId":2314,"service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 23:12:51","updateId":37757855,"updateType":"message","userId":970970260,"username":"kekko_nocerino06"}
{"channelId":"-1003088008408","environment":"development","level":"info","message":"🚀 Starting LosBloccatore Bot v2.0.0 - Refactored Architecture","nodeVersion":"v20.19.3","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:04"}
{"environment":"development","level":"info","message":"📊 Initializing database connection...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:04"}
{"environment":"development","level":"info","message":"Database connection initialized successfully with Prisma","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:04"}
{"environment":"development","level":"info","message":"✅ Database connection established","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:04"}
{"environment":"development","level":"info","message":"🔧 Initializing dependency injection container...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:04"}
{"environment":"development","level":"info","message":"TelegramCoreService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:04"}
{"environment":"development","level":"info","message":"TelegramMessageService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:04"}
{"environment":"development","level":"info","message":"TelegramChatService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:04"}
{"environment":"development","level":"info","message":"TelegramInviteService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:04"}
{"environment":"development","level":"info","message":"TelegramService initialized with all domain services","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:04"}
{"environment":"development","level":"info","message":"✅ DI Container initialized with all services","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:04"}
{"environment":"development","level":"info","message":"🎮 Initializing refactored bot controller...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:04"}
{"environment":"development","level":"info","message":"BotController initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:04"}
{"environment":"development","level":"info","message":"✅ Bot controller initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:04"}
{"environment":"development","level":"info","message":"🤖 Setting up Telegram bot...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:04"}
{"environment":"development","level":"info","message":"✅ Bot event handlers configured","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:04"}
{"environment":"development","level":"info","message":"📡 Starting bot polling...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:04"}
{"allowedUpdates":["message","edited_message","channel_post","edited_channel_post","inline_query","chosen_inline_result","callback_query","shipping_query","pre_checkout_query","poll","poll_answer","my_chat_member","chat_member","chat_join_request"],"environment":"development","level":"info","message":"Starting bot polling with allowed updates","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:04","totalUpdates":14}
{"chatId":970970260,"chatType":"private","environment":"development","firstName":"Kekko","level":"info","message":"Incoming Telegram update","messageId":2317,"service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:07","updateId":37757856,"updateType":"message","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Manual leaderboard generation requested","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:07"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Generating and sending scheduled leaderboard","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:07"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Starting leaderboard image generation","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:08"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Leaderboard image generated successfully","outputPath":"/Users/lospaccabit/Downloads/losbloccatore_bot/media/classifica_output.png","participantCount":2,"service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:08"}
{"environment":"development","level":"info","message":"TelegramCoreService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:08"}
{"environment":"development","level":"info","message":"TelegramMessageService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:08"}
{"environment":"development","level":"info","message":"TelegramChatService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:08"}
{"environment":"development","level":"info","message":"TelegramInviteService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:08"}
{"environment":"development","level":"info","message":"TelegramService initialized with all domain services","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:08"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Photo sent successfully","photoPath":"/Users/lospaccabit/Downloads/losbloccatore_bot/media/classifica_output.png","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:08"}
{"chatId":-1003088008408,"dbChatId":-1003088008408,"environment":"development","imagePath":"/Users/lospaccabit/Downloads/losbloccatore_bot/media/classifica_output.png","level":"info","message":"Scheduled leaderboard sent successfully","participantCount":2,"service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:08"}
{"adminUserId":970970260,"environment":"development","level":"info","message":"Manual leaderboard generation triggered by admin","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:08"}
{"chatId":970970260,"chatType":"private","duration":1091,"environment":"development","firstName":"Kekko","level":"info","message":"Request processed successfully","messageId":2317,"service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 23:13:08","updateId":37757856,"updateType":"message","userId":970970260,"username":"kekko_nocerino06"}
{"channelId":"-1003088008408","environment":"development","level":"info","message":"🚀 Starting LosBloccatore Bot v2.0.0 - Refactored Architecture","nodeVersion":"v20.19.3","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:25"}
{"environment":"development","level":"info","message":"📊 Initializing database connection...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:25"}
{"environment":"development","level":"info","message":"Database connection initialized successfully with Prisma","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:25"}
{"environment":"development","level":"info","message":"✅ Database connection established","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:25"}
{"environment":"development","level":"info","message":"🔧 Initializing dependency injection container...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:25"}
{"environment":"development","level":"info","message":"TelegramCoreService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:25"}
{"environment":"development","level":"info","message":"TelegramMessageService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:25"}
{"environment":"development","level":"info","message":"TelegramChatService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:25"}
{"environment":"development","level":"info","message":"TelegramInviteService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:25"}
{"environment":"development","level":"info","message":"TelegramService initialized with all domain services","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:25"}
{"environment":"development","level":"info","message":"✅ DI Container initialized with all services","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:25"}
{"environment":"development","level":"info","message":"🎮 Initializing refactored bot controller...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:25"}
{"environment":"development","level":"info","message":"BotController initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:25"}
{"environment":"development","level":"info","message":"✅ Bot controller initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:25"}
{"environment":"development","level":"info","message":"🤖 Setting up Telegram bot...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:25"}
{"environment":"development","level":"info","message":"✅ Bot event handlers configured","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:25"}
{"environment":"development","level":"info","message":"📡 Starting bot polling...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:25"}
{"allowedUpdates":["message","edited_message","channel_post","edited_channel_post","inline_query","chosen_inline_result","callback_query","shipping_query","pre_checkout_query","poll","poll_answer","my_chat_member","chat_member","chat_join_request"],"environment":"development","level":"info","message":"Starting bot polling with allowed updates","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:25","totalUpdates":14}
{"chatId":970970260,"chatType":"private","environment":"development","firstName":"Kekko","level":"info","message":"Incoming Telegram update","messageId":2320,"service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:26","updateId":37757857,"updateType":"message","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Manual leaderboard generation requested","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:26"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Generating and sending scheduled leaderboard","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:26"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Starting leaderboard image generation","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:26"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Leaderboard image generated successfully","outputPath":"/Users/lospaccabit/Downloads/losbloccatore_bot/media/classifica_output.png","participantCount":2,"service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:26"}
{"environment":"development","level":"info","message":"TelegramCoreService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:26"}
{"environment":"development","level":"info","message":"TelegramMessageService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:26"}
{"environment":"development","level":"info","message":"TelegramChatService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:26"}
{"environment":"development","level":"info","message":"TelegramInviteService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:26"}
{"environment":"development","level":"info","message":"TelegramService initialized with all domain services","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:26"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Photo sent successfully","photoPath":"/Users/lospaccabit/Downloads/losbloccatore_bot/media/classifica_output.png","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:27"}
{"chatId":-1003088008408,"dbChatId":-1003088008408,"environment":"development","imagePath":"/Users/lospaccabit/Downloads/losbloccatore_bot/media/classifica_output.png","level":"info","message":"Scheduled leaderboard sent successfully","participantCount":2,"service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:27"}
{"adminUserId":970970260,"environment":"development","level":"info","message":"Manual leaderboard generation triggered by admin","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:27"}
{"chatId":970970260,"chatType":"private","duration":1122,"environment":"development","firstName":"Kekko","level":"info","message":"Request processed successfully","messageId":2320,"service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 23:13:27","updateId":37757857,"updateType":"message","userId":970970260,"username":"kekko_nocerino06"}
{"channelId":"-1003088008408","environment":"development","level":"info","message":"🚀 Starting LosBloccatore Bot v2.0.0 - Refactored Architecture","nodeVersion":"v20.19.3","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:43"}
{"environment":"development","level":"info","message":"📊 Initializing database connection...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:43"}
{"environment":"development","level":"info","message":"Database connection initialized successfully with Prisma","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:43"}
{"environment":"development","level":"info","message":"✅ Database connection established","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:43"}
{"environment":"development","level":"info","message":"🔧 Initializing dependency injection container...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:43"}
{"environment":"development","level":"info","message":"TelegramCoreService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:43"}
{"environment":"development","level":"info","message":"TelegramMessageService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:43"}
{"environment":"development","level":"info","message":"TelegramChatService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:43"}
{"environment":"development","level":"info","message":"TelegramInviteService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:43"}
{"environment":"development","level":"info","message":"TelegramService initialized with all domain services","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:43"}
{"environment":"development","level":"info","message":"✅ DI Container initialized with all services","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:43"}
{"environment":"development","level":"info","message":"🎮 Initializing refactored bot controller...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:43"}
{"environment":"development","level":"info","message":"BotController initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:43"}
{"environment":"development","level":"info","message":"✅ Bot controller initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:43"}
{"environment":"development","level":"info","message":"🤖 Setting up Telegram bot...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:43"}
{"environment":"development","level":"info","message":"✅ Bot event handlers configured","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:43"}
{"environment":"development","level":"info","message":"📡 Starting bot polling...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:43"}
{"allowedUpdates":["message","edited_message","channel_post","edited_channel_post","inline_query","chosen_inline_result","callback_query","shipping_query","pre_checkout_query","poll","poll_answer","my_chat_member","chat_member","chat_join_request"],"environment":"development","level":"info","message":"Starting bot polling with allowed updates","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:43","totalUpdates":14}
{"chatId":970970260,"chatType":"private","environment":"development","firstName":"Kekko","level":"info","message":"Incoming Telegram update","messageId":2323,"service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:47","updateId":37757858,"updateType":"message","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Manual leaderboard generation requested","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:47"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Generating and sending scheduled leaderboard","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:47"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Starting leaderboard image generation","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:47"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Leaderboard image generated successfully","outputPath":"/Users/lospaccabit/Downloads/losbloccatore_bot/media/classifica_output.png","participantCount":2,"service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:47"}
{"environment":"development","level":"info","message":"TelegramCoreService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:47"}
{"environment":"development","level":"info","message":"TelegramMessageService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:47"}
{"environment":"development","level":"info","message":"TelegramChatService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:47"}
{"environment":"development","level":"info","message":"TelegramInviteService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:47"}
{"environment":"development","level":"info","message":"TelegramService initialized with all domain services","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:47"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Photo sent successfully","photoPath":"/Users/lospaccabit/Downloads/losbloccatore_bot/media/classifica_output.png","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:48"}
{"chatId":-1003088008408,"dbChatId":-1003088008408,"environment":"development","imagePath":"/Users/lospaccabit/Downloads/losbloccatore_bot/media/classifica_output.png","level":"info","message":"Scheduled leaderboard sent successfully","participantCount":2,"service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:48"}
{"adminUserId":970970260,"environment":"development","level":"info","message":"Manual leaderboard generation triggered by admin","service":"losbloccatore-bot","timestamp":"2025-09-02 23:13:48"}
{"chatId":970970260,"chatType":"private","duration":1113,"environment":"development","firstName":"Kekko","level":"info","message":"Request processed successfully","messageId":2323,"service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 23:13:48","updateId":37757858,"updateType":"message","userId":970970260,"username":"kekko_nocerino06"}
{"channelId":"-1003088008408","environment":"development","level":"info","message":"🚀 Starting LosBloccatore Bot v2.0.0 - Refactored Architecture","nodeVersion":"v20.19.3","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:12"}
{"environment":"development","level":"info","message":"📊 Initializing database connection...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:12"}
{"environment":"development","level":"info","message":"Database connection initialized successfully with Prisma","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:12"}
{"environment":"development","level":"info","message":"✅ Database connection established","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:12"}
{"environment":"development","level":"info","message":"🔧 Initializing dependency injection container...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:12"}
{"environment":"development","level":"info","message":"TelegramCoreService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:12"}
{"environment":"development","level":"info","message":"TelegramMessageService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:12"}
{"environment":"development","level":"info","message":"TelegramChatService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:12"}
{"environment":"development","level":"info","message":"TelegramInviteService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:12"}
{"environment":"development","level":"info","message":"TelegramService initialized with all domain services","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:12"}
{"environment":"development","level":"info","message":"✅ DI Container initialized with all services","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:12"}
{"environment":"development","level":"info","message":"🎮 Initializing refactored bot controller...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:12"}
{"environment":"development","level":"info","message":"BotController initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:12"}
{"environment":"development","level":"info","message":"✅ Bot controller initialized with all handlers","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:12"}
{"environment":"development","level":"info","message":"🤖 Setting up Telegram bot...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:12"}
{"environment":"development","level":"info","message":"✅ Bot event handlers configured","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:12"}
{"environment":"development","level":"info","message":"📡 Starting bot polling...","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:12"}
{"allowedUpdates":["message","edited_message","channel_post","edited_channel_post","inline_query","chosen_inline_result","callback_query","shipping_query","pre_checkout_query","poll","poll_answer","my_chat_member","chat_member","chat_join_request"],"environment":"development","level":"info","message":"Starting bot polling with allowed updates","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:12","totalUpdates":14}
{"chatId":970970260,"chatType":"private","environment":"development","firstName":"Kekko","level":"info","message":"Incoming Telegram update","messageId":2326,"service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:14","updateId":37757859,"updateType":"message","userId":970970260,"username":"kekko_nocerino06"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Manual leaderboard generation requested","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:14"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Generating and sending scheduled leaderboard","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:14"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Starting leaderboard image generation","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:14"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Leaderboard image generated successfully","outputPath":"/Users/lospaccabit/Downloads/losbloccatore_bot/media/classifica_output.png","participantCount":2,"service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:14"}
{"environment":"development","level":"info","message":"TelegramCoreService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:14"}
{"environment":"development","level":"info","message":"TelegramMessageService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:14"}
{"environment":"development","level":"info","message":"TelegramChatService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:14"}
{"environment":"development","level":"info","message":"TelegramInviteService initialized","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:14"}
{"environment":"development","level":"info","message":"TelegramService initialized with all domain services","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:14"}
{"chatId":-1003088008408,"environment":"development","level":"info","message":"Photo sent successfully","photoPath":"/Users/lospaccabit/Downloads/losbloccatore_bot/media/classifica_output.png","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:15"}
{"chatId":-1003088008408,"dbChatId":-1003088008408,"environment":"development","imagePath":"/Users/lospaccabit/Downloads/losbloccatore_bot/media/classifica_output.png","level":"info","message":"Scheduled leaderboard sent successfully","participantCount":2,"service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:15"}
{"adminUserId":970970260,"environment":"development","level":"info","message":"Manual leaderboard generation triggered by admin","service":"losbloccatore-bot","timestamp":"2025-09-02 23:14:15"}
{"chatId":970970260,"chatType":"private","duration":896,"environment":"development","firstName":"Kekko","level":"info","message":"Request processed successfully","messageId":2326,"service":"losbloccatore-bot","success":true,"timestamp":"2025-09-02 23:14:15","updateId":37757859,"updateType":"message","userId":970970260,"username":"kekko_nocerino06"}
